<html>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.22/vue.min.js"></script>

  <body>
    <div id="app">
      <input v-model="message" />
      <h2>CCID</h2>
      <div>{{ ccid() }}</div>
      <h2>APDU</h2>
      <div>{{ apdu() }}</div>
    </div>

    <script>
      const app = new Vue({
        el: "#app",
        data: {
          message: "6B 04 00 00 00 00 00 00 00 00 FF 56 00 00",
        },
        methods: {
          ccid: function() {
            const result = {
              bMessageType: '',
              dwLength: '',
              bSlot: '',
              bSeq: '',
              abRFU: '',
              abData: '',
            };

            const ccid = this.message.trim().split(' ');
            result.bMessageType = ccid.slice(0, 1);
            result.dwLength = ccid.slice(1, 5);
            result.bSlot = ccid.slice(5, 6);
            result.bSeq = ccid.slice(6, 7);
            result.abRFU = ccid.slice(7, 10);
            result.abData = ccid.slice(10);

            return JSON.stringify(result, null, 2);
          },
          apdu: function() {
            const result = {
              CLA: '',
              INS: '',
              P1: '',
              P2: '',
              Lc: '',
              DataField: '',
              Le: '',
            };

            const apdu = this.message.trim().split(' ').slice(10);
            result.CLA = apdu.slice(0, 1);
            result.INS = apdu.slice(1, 2);
            result.P1 = apdu.slice(2, 3);
            result.P2 = apdu.slice(3, 4);
            result.Lc = apdu.slice(4, 5);
            result.DataField = apdu.slice(5, 8);
            result.Le = apdu.slice(8, 9);

            return JSON.stringify(result, null, 2);
          },
        },
      });
    </script>
  </body>
</html>
